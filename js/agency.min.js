/*!
 * Start Bootstrap - Agency v5.0.7 (https://startbootstrap.com/template-overviews/agency)
 * Copyright 2013-2019 Start Bootstrap
 * Licensed under MIT (https://github.com/BlackrockDigital/startbootstrap-agency/blob/master/LICENSE)
 */

! function(o) {
 "use strict";

var arrayPictures;
var arrayValues = [];
    
var vEl = document.getElementById('vanilla-demo'),
    vanilla = new Croppie(vEl, {
    viewport: { width: 150, height: 225 },
    boundary: { width: 300, height: 300 },
    showZoomer: true,
    enableOrientation: true
});
vanilla.bind({
    url: 'img/f2.jpg'
});
vEl.addEventListener('update', function (ev) {
    console.log('vanilla update', ev);
});
document.querySelector('.vanilla-result').addEventListener('click', function (ev) {
    vanilla.result({
        type: 'blob'
    }).then(function (blob) {
        popupResult({
            src: window.URL.createObjectURL(blob)
        });
    });
});

$('.vanilla-rotate').on('click', function(ev) {
    vanilla.rotate(parseInt($(this).data('deg')));
});
    
$("#submitCode").on('click', function(){
    if($('#code').val() == 1){
         window.location.replace("CustomeTemplate.html");   
    }
    else if($('#code').val() == 2){
        window.location.replace("store.html");
    }
});

//close btn on store.html pg, closing pic cards
$("#div1").on('click', '#closeButton', function(){
    $('#div1').empty();
});

//store.html clicking 8x10 preview
$('#8x10').click(function (event) 
{   
    a8x10();
});

//store.html clicking 5x7 preview
$('#5x7').click(function (event) 
{
    a5x7();
    
    /* cannot add more then 2
    if($('#div1').children('.a5x7').length<2)
        {
            $('#div1').append('<div class="a5x7"><p>5x7</p></div>');
            $('.a5x7').css("display", "inline-block");
        }   

    //when there is two, put them sideways
    if($('#div1').children('.a5x7').length == 2)
        {
            $('.a5x7').css("width", "262.5px");
            $('.a5x7').css("height", "187.5px");
        }
    else{
            $('.a5x7').css("width", "187.5px");
            $('.a5x7').css("height", "262.5px");
        }
        */

});

//store.html clicking 4x6 preview
$('#4x6').click(function (event) 
{   
    a4x6();
});

//store.html clicking 4x4 preview
$('#4x4').click(function (event) 
{   
    a4x4();
});

//store2.html clicking a selection
$("#card-sheet").on("drop", function (ev) {
  ev.preventDefault();
  var data = ev.dataTransfer.getData("text");
    
    console.log(+document.getElementById(data).val());
        switch(+document.getElementById(data).val())
        {
            case 57: 
                $('.a5x7').css("display", "block");
                break;
            case 46:
                $('.a4x6').css("display", "block");
                break;
            case 810:
                $('.a8x10').css("display", "block");
                break;
            case 0:
                $('.a5x7').css("display", "none");
                $('.a8x10').css("display", "none");
                $('.a4x6').css("display", "none");
                break;
            default: 
                break;
        }
});

//dragging image on store.html pg
$("#drag-with-image").on("dragstart", function(e) {
    console.log("why");
    var img = document.createElement("img");
    img.src = '../img/drag.jpg';
    e.dataTransfer.setDragImage(img, 0, 0);
}, false);
    
//storing value of sheet on store2.html pg
$('#saveSheetBtn').click(function (event) 
{   
    //save the value of select option
    var len = arrayValues.length;
    
    if(len == 0)
        len = 1;
    
    arrayValues[len-1] = $('#sheetOption').val();
    console.log(arrayValues[len-1]);
    
    //change the circle
    var nxt = $("a.circleActive").removeClass("circleActive").next()
    
    if(nxt.is('a')){
        nxt.addClass("circleActive");
        
        if(!nxt.next().is('a'))
        {
            $(this).html("Finished!");
        }
    }
    
    //reload preview section by deleting all child nodes
    $('#div1').empty();
});

//reset for store pgs
$('#resetSheetBtn').click(function (event) 
{       
    //reload preview section by deleting all child nodes
    $('#div1').empty();
});   

//old function for store2 select pg
$('#sheetOption').change(function (event) {
    
    console.log($(this).val());
    
    $('#div1').empty();
    
    switch(+$(this).val())
        {
            case 57:
                $('#div1').append('<div class="a5x7"><p>5x7</p></div>');
                $('#div1').append('<div class="a5x7"><p>5x7</p></div>');
                $('.a5x7').css("width", "262.5px");
                $('.a5x7').css("height", "187.5px");
                $('.a5x7').css("display", "block");
                $('.a8x10').css("display", "none");
                $('.a4x6').css("display", "none");
                break;
            case 46:
                $('#div1').append('<div class="a4x6"><p>4x6</p></div>');
                $('#div1').append('<div class="a4x6"><p>4x6</p></div>');
                $('#div1').append('<div class="a6x4"><p>4x6</p></div>');
                $('.a4x6').css("display", "block");
                $('.a6x4').css("display", "block");
                $('.a5x7').css("display", "none");
                $('.a8x10').css("display", "none");
                break;
            case 810:
                $('#div1').append('<div class="a8x10"><p>8x10</p></div>');
                $('.a8x10').css("display", "block");
                $('.a5x7').css("display", "none");
                $('.a4x6').css("display", "none");
                break;
            case 44:
                $('#div1').append('<div class="a4x4"><p>4x4</p></div>');
                $('#div1').append('<div class="a4x4"><p>4x4</p></div>');
                $('#div1').append('<div class="a4x4"><p>4x4</p></div>');
                $('#div1').append('<div class="a4x4"><p>4x4</p></div>');
                $('.a4x4').css("display", "block");
                $('.a8x10').css("display", "none");
                $('.a5x7').css("display", "none");
                $('.a4x6').css("display", "none");
                break;
            case 0:
                $('.a5x7').css("display", "none");
                $('.a8x10').css("display", "none");
                $('.a4x6').css("display", "none");
                break;
            case 5744:
                $('#div1').append('<div class="a5x7"><p>5x7</p></div>');
                $('.a5x7').css("width", "262.5px");
                $('.a5x7').css("height", "187.5px");
                $('.a5x7').css("display", "block");
                
                $('#div1').append('<div class="a4x4"><p>4x4</p></div>');
                $('#div1').append('<div class="a4x4"><p>4x4</p></div>');
                $('.a4x4').css("display", "block");
                break;
            default: 
                break;
        }
    
});
       
$('#dropbtn').click(function (event) 
{   
    console.log($(".dropdown-content2").css("display"));
    if($(".dropdown-content2").css("display") === "block")
        $(".dropdown-content2").css("display", "none");
    else
        $(".dropdown-content2").css("display", "block");   
});
   
$('body').click(function (event) 
{
   if(!$(event.target).closest('#mainNav').length && !$(event.target).is('#mainNav')) {
     $(".navbar-collapse").collapse("hide");
   }     
});
    
$('#nextbtn3').click(function() {
    $('.slidePic').css('background-image', 'url("file:///Users/freddymartinez/Desktop/CubeeWeb/img/f1.jpeg")');
    $('.slidePic').css('z-index', '1');
});
    
$('#acc1').click(function() {
    if(checkScreenSize()){
        $('.onlyOnMobile').toggle();   
    }
    else{
        $('.notOnMobile').toggle();    
    }
    
    $('#panel2').css("maxHeight", "0");
    $('#panel3').css("maxHeight", "0");
    $('.slidePic').css('z-index', '1');
    $('#panel').css('max-height', '100%');
});
    
$('#acc4').click(function() {
    if(checkScreenSize())
    {
        $('.onlyOnMobile').toggle();   
    }
    else{
        $('.notOnMobile').toggle();    
    }
    
    $('#panel5').css("maxHeight", "0");
    $('#panel6').css("maxHeight", "0");
});  
    
$('#nextbtn').click(function() {
  document.getElementById("panel").style.maxHeight = "0px";
  document.getElementById("panel2").style.maxHeight = "100%";
    
    if(checkScreenSize())
        $('.onlyOnMobile').css('display','none');
    else
        $('.notOnMobile').css('display','none');
});
    
$('#nextbtnn').click(function() {
  document.getElementById("panel2").style.maxHeight = "0px";
  document.getElementById("panel3").style.maxHeight = "100%";
});

$('#nextbtn4').click(function() {
  document.getElementById("panel4").style.maxHeight = "0px";
  document.getElementById("panel5").style.maxHeight = "100%";
    
  if(checkScreenSize())
    $('.onlyOnMobile').css('display','none');
  else
    $('.notOnMobile').css('display','none');  
});
    
$('#nextbtn5').click(function() {
  document.getElementById("panel5").style.maxHeight = "0px";
  document.getElementById("panel6").style.maxHeight = "100%";
  $('.videoPlay').css('display','inline-block');
});
    
$('#watermark').click(function() {
    $("#mark").toggle(this.checked);
});
    
$(document).ready(function(){
  $('form input').change(function () {
    $('form p').text(this.files.length + " file(s) selected");
  });
});
$(document).ready(function(){
  $('formyForPhotoPage input').change(function () {
    $('formyForPhotoPage a').text(this.files);
  });
});

function checkScreenSize(){
    var newWindowWidth = $(window).width();
    if (newWindowWidth < 481) {
        return true;
    }
    return false;
}
    
var dropdown = document.getElementsByClassName("dropdown-btn");
var i;

for (i = 0; i < dropdown.length; i++) {
  dropdown[i].addEventListener("click", function() {
  this.classList.toggle("active");
  var dropdownContent = this.nextElementSibling;
  if (dropdownContent.style.display === "block") {
  dropdownContent.style.display = "none";
  } else {
  dropdownContent.style.display = "block";
  }
  });
}

//changing cube slide title on customeTemplate.html
var noMove = document.getElementsByClassName("noMove");
var i; 
for (i = 0; i < noMove.length; i++) {
  noMove[i].addEventListener("click", function() {
      document.getElementById("cubeeEditPic").innerText = "Cubee - Edit Slide " + $(this).attr("value");
      
      document.getElementById("cubeeEditVideo").innerText = "Cubee - Edit Slide " + $(this).attr("value");
      
      $('.videoPlay').css('display','none');
      
        if($('.onlyOnMobile').css('display') === 'none'){
            if(checkScreenSize())
                $('.onlyOnMobile').css('display','inline-block');
            else
                $('.notOnMobile').css('display','inline-block'); 
        }
    $('#panel2').css("maxHeight", "0");
    $('#panel3').css("maxHeight", "0");
    $('#panel5').css("maxHeight", "0");
    $('#panel6').css("maxHeight", "0");
    $('#panel').css('max-height', '100%');
    $('#panel4').css('max-height', '100%');

      });
}

//accordian animation on customTemplate.html on modal1 and modal2
var acc = document.getElementsByClassName("accordion1");
var i;
for (i = 0; i < acc.length; i++) {
  acc[i].addEventListener("click", function() {
    this.classList.toggle("active");
    var panel = this.nextElementSibling;
    if (panel.style.maxHeight){
      panel.style.maxHeight = null;
    } else {
      panel.style.maxHeight = panel.scrollHeight + "px";
    }
  });
}

//change video photo thumbnail on customTemplate.html modal2
var cp = document.getElementsByClassName("coverPhotoThumb");
var i;
for (i = 0; i < cp.length; i++) {
  cp[i].addEventListener("click", function(temp) {
      
      $('.coverPhoto').css('background-image', 'url("'+ this.src +'")');
      
        var current = document.getElementsByClassName("activePreviewPic");
        current[0].className = current[0].className.replace(" activePreviewPic", "");
        this.className += " activePreviewPic";
  });
}

//-----------THIS IS BOOTSTRAP JQ DO NOT TOUCH----------------------------
 o('a.js-scroll-trigger[href*="#"]:not([href="#"])').click(function() {
  if (location.pathname.replace(/^\//, "") == this.pathname.replace(/^\//, "") && location.hostname == this.hostname) {
   var a = o(this.hash);
   if ((a = a.length ? a : o("[name=" + this.hash.slice(1) + "]")).length) return o("html, body").animate({
    scrollTop: a.offset().top - 54
   }, 1e3, "easeInOutExpo"), !1
  }
 }), o(".js-scroll-trigger").click(function() {
  o(".navbar-collapse").collapse("hide")
 }), o("body").scrollspy({
  target: "#mainNav",
  offset: 56
 });
 var a = function() {
  100 < o("#mainNav").offset().top ? o("#mainNav").addClass("navbar-shrink") : o("#mainNav").removeClass("navbar-shrink")
 };
 a(), o(window).scroll(a), o(".portfolio-modal").on("show.bs.modal", function(a) {
  o(".navbar").addClass("d-none")
 }), o(".portfolio-modal").on("hidden.bs.modal", function(a) {
  o(".navbar").removeClass("d-none")
 })
}(jQuery);

//Functions for displaying size of sheet and uploading photo for store.html
function a8x10(){
$('#div1').empty();
$('#div1').append('<div id="a8x10" class="a8x10">'
                  + '<button id="closeButton" type="button" class="btn btn-warning btn-circle">'
                  +'<i class="fa fa-times"></i></button>'
                  + '<p class="titleSheet">8x10</p>'
                  + '<div id=\'clock\' class="clock"></div>'
                  + '<form class="formyForPhotoPage" action="" method="POST">'
                  + '<input id=\'getval\' type="file" multiple>'
                  + '<p class="dragDropText">'
                  +'<i class="fas fa-cloud-upload-alt"></i> Upload Your Photo</p>'
                  + '</form></div/>');
                  
$('.a8x10').css("display", "block");
var t1 = "getval";
var t2 = t1;
document.getElementById('getval').addEventListener('change', readURL, true);
}
function a5x7(){
$('#div1').empty();
$('#div1').append(  '<div class="a5x7"><p class="titleSheet">5x7</p>'
                  + '<button id="closeButton" type="button" class="btn btn-warning btn-circle c5x7"><i class="fa fa-times"></i></button>'
                  + '<div id=\'clock\' class="clock"></div>'
                  + '<form class="formyForPhotoPage" action="" method="POST">'
                  + '<input id=\'getval1\' type="file" multiple>'
                  + '<p class="dragDropText UploadText5x7Bottom">'
                  +'<i class="fas fa-cloud-upload-alt"></i> Upload Your Photo</p>'
                  + '</form></div/>'
                  
                  + '<div class="a5x7"><p class="titleSheet2">5x7</p>'
                  + '<div id=\'clock\' class="clock2"></div>'
                  + '<form class="formyForPhotoPage" action="" method="POST">'
                  + '<input id=\'getval2\' type="file" multiple>'
                  + '<p class="dragDropText2 UploadText5x7Top">'
                  +'<i class="fas fa-cloud-upload-alt"></i> Upload Your Photo</p>'
                  + '</form></div/>' );
                  
$('.a5x7').css("display", "block");
$('.a5x7').css("width", "262.5px");
$('.a5x7').css("height", "187.5px"); 
    
document.getElementById('getval1').addEventListener('change', readURL, true);
document.getElementById('getval2').addEventListener('change', readURLFor2, true);
}
function a4x6(){
$('#div1').empty();
$('#div1').append(  '<div class="a6x4"><p class="titleSheet">4x6</p>'
                  + '<button id="closeButton" type="button" class="btn btn-warning btn-circle c4x6"><i class="fa fa-times"></i></button>'
                  + '<div id=\'clock\' class="clock"></div>'
                  + '<form class="formyForPhotoPage" action="" method="POST">'
                  + '<input id=\'getval1\' type="file" multiple>'
                  + '<p class="dragDropText UploadText4x6Bottom">'
                  +'<i class="fas fa-cloud-upload-alt"></i> Upload Your Photo</p>'
                  + '</form></div/>'
                  
                  + '<div class="a6x4"><p class="titleSheet2">4x6</p>'
                  + '<div id=\'clock\' class="clock2"></div>'
                  + '<form class="formyForPhotoPage" action="" method="POST">'
                  + '<input id=\'getval2\' type="file" multiple>'
                  + '<p class="dragDropText2 UploadText4x6Top">'
                  +'<i class="fas fa-cloud-upload-alt"></i> Upload Your Photo</p>'
                  + '</form></div/>' );
                  
$('.a6x4').css("display", "block");
    
document.getElementById('getval1').addEventListener('change', readURL, true);
document.getElementById('getval2').addEventListener('change', readURLFor2, true);
}
function a4x4(){
$('#div1').empty();
$('#div1').append(  '<div class="a4x4"><p class="titleSheet titleSheet4x4">4x4</p>'
                  + '<button id="closeButton" type="button" class="btn btn-warning btn-circle c4x4"><i class="fa fa-times"></i></button>'
                  + '<div id=\'clock\' class="clock"></div>'
                  + '<form class="formyForPhotoPage" action="" method="POST">'
                  + '<input id=\'getval1\' type="file" multiple>'
                  + '<p class="dragDropText UploadText4x4Top1">'
                  +'<i class="fas fa-cloud-upload-alt"></i> Upload</p>'
                  + '</form></div/>'
                  
                  + '<div class="a4x4">'
                  + '<div id=\'clock\' class="clock"></div>'
                  + '<form class="formyForPhotoPage" action="" method="POST">'
                  + '<input id=\'getval1\' type="file" multiple>'
                  + '<p class="dragDropText UploadText4x4Top2">'
                  +'<i class="fas fa-cloud-upload-alt"></i> Upload</p>'
                  + '</form></div/>'
                 
                  + '<div class="a4x4">'
                  + '<div id=\'clock\' class="clock"></div>'
                  + '<form class="formyForPhotoPage" action="" method="POST">'
                  + '<input id=\'getval1\' type="file" multiple>'
                  + '<p class="dragDropText UploadText4x4Bottom1">'
                  +'<i class="fas fa-cloud-upload-alt"></i> Upload</p>'
                  + '</form></div/>'
                 
                  + '<div class="a4x4">'
                  + '<div id=\'clock\' class="clock"></div>'
                  + '<form class="formyForPhotoPage" action="" method="POST">'
                  + '<input id=\'getval1\' type="file" multiple>'
                  + '<p class="dragDropText UploadText4x4Bottom2">'
                  +'<i class="fas fa-cloud-upload-alt"></i> Upload</p>'
                  + '</form></div/>');
                  
$('.a4x4').css("display", "block");
    
document.getElementById('getval1').addEventListener('change', readURL, true);
document.getElementById('getval2').addEventListener('change', readURLFor2, true);
}

//functions for all drag and drop icons for store.html
function allowDrop(ev) {
  ev.preventDefault();
}
function drag(ev) {
  ev.dataTransfer.setData("text", ev.target.id);
}
function drop(ev) {
  ev.preventDefault();
  var data = ev.dataTransfer.getData("text");
        switch(data)
        {
            case "5x7": 
                a5x7();
                break;
            case "4x6":
                a4x6();
                break;
            case "8x10": 
                a8x10();
                break;
            case "4x4":
                a4x4();
                break;
            default: 
                break;
        }
}

//function uploads photo and sets background of div
function readURL(){
    console.log($(this).next());
   var file = document.getElementById(this.id).files[0];
   var reader = new FileReader();
   reader.onloadend = function(){
    
    $(".clock").css("backgroundImage", "url(" + reader.result + ")");
    $(".clock").css("height", "100%"); 
       
    //removing the text in the upload box, after picture takes up box
    $(".titleSheet").css("display", "none");
    $(".dragDropText").css("display", "none");
   }
   if(file){
      reader.readAsDataURL(file);
    }else{
    }
}
function readURLFor2(){
   var file = document.getElementById(this.id).files[0];
   var reader = new FileReader();
   reader.onloadend = function(){
    
    $(".clock2").css("backgroundImage", "url(" + reader.result + ")");
    $(".clock2").css("height", "100%"); 
       
    //removing the text in the upload box, after picture takes up box
    $(".titleSheet2").css("display", "none");
    $(".dragDropText2").css("display", "none");
   }
   if(file){
      reader.readAsDataURL(file);
    }else{
    }
}
function readURLFor4(){
   var file = document.getElementById(this.id).files[0];
   var reader = new FileReader();
   reader.onloadend = function(){
    
    $(".clock1").css("backgroundImage", "url(" + reader.result + ")");
    $(".clock2").css("height", "100%"); 
       
    //removing the text in the upload box, after picture takes up box
    $(this).next().find('.titleSheet').remove();
    $(this).next().find('.dragDropText').remove();
   }
   if(file){
      reader.readAsDataURL(file);
    }else{
    }
}


/*
function drop(ev) {
  ev.preventDefault();
  var data = ev.dataTransfer.getData("text");
        switch(data)
        {
            case "drag1":                   
                //cannot add more then 2
                if($('#div1').children('.a5x7').length>1)
                    {
                        break;
                    }
                else{
                        $('#div1').append('<div class="a5x7"><p>5x7</p></div>');
                        $('.a5x7').css("display", "inline-block");
                    }   
                
                //when there is two, put them sideways
                if($('#div1').children('.a5x7').length == 2)
                    {
                        $('.a5x7').css("width", "262.5px");
                        $('.a5x7').css("height", "187.5px");
                    }
                else{
                        $('.a5x7').css("width", "187.5px");
                        $('.a5x7').css("height", "262.5px");
                    }
                break;
            case "drag2":
                if($('#div1').children('.a4x6').length == 2)
                {   
                   $('#div1').append('<div class="a6x4"><p>4x6</p></div>');
                    $('.a6x4').css("display", "inline-block");
                }
                else if($('#div1').children('.a4x6').length < 2)
                {
                    $('#div1').append('<div class="a4x6"><p>4x6</p></div>');   
                }
                
                $('.a4x6').css("display", "inline-block");
                $('.a8x10').css("display", "none");
                $('.a5x7').css("display", "none");
                break;
            case "drag3":
                $('#div1').append('<div class="a8x10"><p>8x10</p></div>');
                $('.a8x10').css("display", "block");
                $('.a5x7').css("display", "none");
                $('.a4x6').css("display", "none");
                $('.a4x4').css("display", "none");
                $('.a6x4').css("display", "none");
                break;
            case "drag4":
                $('#div1').append('<div class="a4x4"><p>4x4</p></div>');
                $('.a4x4').css("display", "inline-block");
                $('.a8x10').css("display", "none");
                break;
                
            default: 
                break;
        }
}
*/